<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        /* reset */
        body,
        ul {
            margin: 0;
        }

        ul {
            list-style: none;
            padding: 0;
        }

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: 0% 0%;
            vertical-align: top;
        }

        section {
            padding: 0 20px;
        }

        #slideWrap {
            position: relative;
            max-width: 1480px;
            max-height: 500px;
            width: 100%;
            margin:0 auto;
            overflow: hidden;
        }

        /* slide */
        #slideWrap .slide {
            display: flex;
            position: relative;
            left: 0;
        }

        #slideWrap li {
            flex: 0 0 100%;
        }

        #slideWrap .controls {
            position: absolute;
            left:0;
            top:0;
        }
        #slideWrap .controls a {
            color: red;
            font-size: 3rem;
        }
        #slideWrap .pager {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom:1vw;
        } 
        #slideWrap .pager a {
            display: inline-block;
            min-width: 8px;
            min-height: 8px;
            max-width: 12px;
            max-height: 12px;
            width: 1vw;
            height: 1vw;
            background: #fff;
            border-radius: 50%;
            margin: 0 .5vw;
            text-indent: -9999em;
        }

        #slideWrap .pager a.active {
            background: red;
        }
    </style>
    <script>
        window.addEventListener("DOMContentLoaded", () => {
            const slideList = document.querySelector("#slideWrap ul");
            const controls = document.querySelectorAll(".controls a");
            const pagerLink = document.querySelectorAll("#slideWrap .pager a");
            let forbidden = 0;
            
            controls[0].onclick = () => goToPrevSlide();
            controls[1].onclick = () => goToNextSlide();
            
            function goToNextSlide() {
                if (forbidden) return;
                forbidden = 1;
                setTimeout(()=>forbidden=0, 700);

                const slideItem = slideList.querySelectorAll("li");
                slideList.style.left = "-100%";
                slideList.style.transition = ".7s";
                setTimeout(() => {
                    slideList.appendChild(slideItem[0]);
                    slideList.style.left = 0;
                    slideList.style.transition = "none";
                }, 700);

                pager(1);
                stopSlide();
            }

            function goToPrevSlide() {
                if (forbidden) return;
                forbidden = 1;
                setTimeout(()=>forbidden=0, 700);

                const slideItem = slideList.querySelectorAll("li");
                slideList.insertBefore(slideItem[slideItem.length - 1], slideItem[0]);
                slideList.style.left = "-100%";
                slideList.style.transition = "none";
                setTimeout(() => {
                    slideList.style.left = 0;
                    slideList.style.transition = ".7s";
                }, 0);

                pager(0);
                stopSlide();
            }

            slideList.querySelectorAll("li").forEach((ele,idx)=>{
                ele.setAttribute("data-pager",idx);
            });

            function pager(num) {
                let currentSlideNumber = slideList.querySelectorAll("li")[num].getAttribute("data-pager");
                // console.log(currentSlideNumber);
                for(let x of pagerLink) {
                    x.classList.remove("active");
                }
                pagerLink[currentSlideNumber].classList.add("active");
            }

            for(let y of pagerLink) {
                y.onclick = ()=>{
                    pager(event.currentTarget.innerText);
                    goToSlide(event.currentTarget.innerText);
                };
            }


            function goToSlide(num) {
                if (forbidden) return;
                forbidden = 1;
                setTimeout(()=>forbidden=0, 700);

                const slideItem = slideList.querySelectorAll("li");
                slideList.style.left = -100 * num + "%";
                slideList.style.transition = ".7s";
                setTimeout(() => {
                    slideList.appendChild(slideItem[0]);
                    slideList.style.left = 0 * num + "%";
                    slideList.style.transition = "none";
                }, 700);

                stopSlide();
            }

            let auto;
            let timer;

            function autoSlide() {
                auto = setInterval(()=>{
                    goToNextSlide();
                }, 3000);
            }

            autoSlide();

            function stopSlide(){
                clearInterval(auto);
                clearTimeout(timer);
                timer = setTimeout(autoSlide, 5000);
            }

        });
    </script>
</head>

<body>
    <section>
        <h2>슬라이드</h2>
        <div id="slideWrap">
            <ul class="slide">
                <li><img src="../assets/pic_1.jpg" alt="이미지1"></li>
                <li><img src="../assets/pic_2.jpg" alt="이미지2"></li>
                <li><img src="../assets/pic_3.jpg" alt="이미지3"></li>
                <li><img src="../assets/pic_4.jpg" alt="이미지4"></li>
                <li><img src="../assets/pic_5.jpg" alt="이미지5"></li>
            </ul>
            <div class="controls">
                <a href="#">prev</a>
                <a href="#">next</a>
            </div>
            <div class="pager">
                <a href="#" class="active">0</a>
                <a href="#">1</a>
                <a href="#">2</a>
                <a href="#">3</a>
                <a href="#">4</a>
            </div>
        </div>
    </section>
</body>

</html>